---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
const posts = await getCollection('devlog');
---
<BaseLayout title="Fiesta RPG">
  <section class="p-4">
    <h1 class="text-2xl font-bold">Fiesta RPG</h1>
    <p>A 2D prequel reimagining of Fiesta Online. Follow the devlog or join the mailing list.</p>
    <div class="my-4">
      <!-- Buttondown embed placeholder -->
      <form action="https://buttondown.email/api/emails/embed-subscribe/fiesta" method="post" class="flex gap-2">
        <input type="email" name="email" placeholder="Email" class="p-2 text-black" />
        <button class="px-4 py-2 bg-nebula-purple text-space-base">Sign Up</button>
      </form>
    </div>
    <h2 class="text-xl font-semibold mt-6 mb-2">Devlog</h2>
    <ul class="list-disc pl-4">
      {posts.map(p => <li>{p.data.date} â€“ {p.data.title}</li>)}
    </ul>
  </section>
</BaseLayout>